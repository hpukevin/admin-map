import{L as a}from"./leaflet-src.1665470366715.js";import{a as s}from"./index.1665470366715.js";import{a2 as o,l as n,a as r,o as p,aB as l,aC as h,b as _}from"./vue.1665470366715.js";L.MagnifyingGlass=L.Layer.extend({options:{radius:100,zoomOffset:3,layers:[],fixedPosition:!1,latLng:[0,0],fixedZoom:-1},initialize:function(t){L.Util.setOptions(this,t),this._fixedZoom=this.options.fixedZoom!=-1,this._mainMap=null,this._glassMap=null},getMap:function(){return this._glassMap},_createMiniMap:function(t){return new L.Map(t,{layers:this.options.layers,zoom:this._getZoom(),maxZoom:this._mainMap.getMaxZoom(),minZoom:this._mainMap.getMinZoom(),crs:this._mainMap.options.crs,fadeAnimation:!1,attributionControl:!1,zoomControl:!1,boxZoom:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,keyboard:!1})},_getZoom:function(){return this._fixedZoom?this.options.fixedZoom:this._mainMap.getZoom()+this.options.zoomOffset},_updateZoom:function(){this._glassMap.setZoom(this._getZoom())},setRadius:function(t){this.options.radius=t,this._wrapperElt&&(this._wrapperElt.style.width=this.options.radius*2+"px",this._wrapperElt.style.height=this.options.radius*2+"px")},setLatLng:function(t){this.options.latLng=t,this._update(t)},_updateFromMouse:function(t){this._update(t.latlng,t.layerPoint)},_updateFixed:function(){this._update(this.options.latLng)},_update:function(t,i){this._glassMap.setView(t,this._getZoom(),{pan:{animate:!1}}),i=i||this._mainMap.latLngToLayerPoint(t),this._wrapperElt.style.left=i.x-this.options.radius+"px",this._wrapperElt.style.top=i.y-this.options.radius+"px"},onAdd:function(t){this._mainMap=t,this._wrapperElt=L.DomUtil.create("div","leaflet-magnifying-glass");var i=L.DomUtil.create("div","",this._wrapperElt);L.Browser.webkit&&L.DomUtil.addClass(i,"leaflet-magnifying-glass-webkit"),this._glassMap=this._createMiniMap(i),L.DomEvent.addListener(this._wrapperElt,"click",this._fireClick,this);var e=this.options;return this.setRadius(e.radius),this.setLatLng(e.latLng),this._glassMap.whenReady(function(){e.fixedPosition?(this._mainMap.on("zoomend",this._updateFixed,this),L.DomUtil.addClass(this._wrapperElt,"leaflet-zoom-hide")):(this._mainMap.on("mousemove",this._updateFromMouse,this),this._fixedZoom||this._mainMap.on("zoomend",this._updateZoom,this))},this),t.getPanes().popupPane.appendChild(this._wrapperElt),this._glassMap.invalidateSize(),this},_fireClick:function(t){this.fire("click",t),L.DomEvent.stopPropagation(t)},onRemove:function(t){t.off("viewreset",this._updateFixed,this),t.off("mousemove",this._updateFromMouse,this),t.off("zoomend",this._updateZoom,this);for(var i=0,e=this.options.layers.length;i<e;i++)this._glassMap.removeLayer(this.options.layers[i]);return this._glassMap.remove(),L.DomEvent.removeListener(this._wrapperElt,"click",this._fireClick),t.getPanes().popupPane.removeChild(this._wrapperElt),this._mainMap=null,this}});L.magnifyingGlass=function(t){return new L.MagnifyingGlass(t)};const f=t=>(l("data-v-4101bc76"),t=t(),h(),t),d=f(()=>_("div",{id:"leaf_map"},null,-1)),m=[d],c={__name:"layerSearch",setup(t){let i=o({});return n(()=>{i=a.map("leaf_map").setView([23.221,113.394],10),a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0}).addTo(i),a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0}).addTo(i);var e=a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0});a.magnifyingGlass({layers:[e],radius:150,zoomOffset:0}).addTo(i)}),(e,u)=>(p(),r("div",null,m))}};var M=s(c,[["__scopeId","data-v-4101bc76"]]);export{M as default};
