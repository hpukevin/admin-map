import{K as k,s as l,a2 as N,m as c,J as T,n as m,l as A,H as K,j as y,a as C,Z as f,S as v,k as L,aD as B,a6 as x,o as i,_ as P,u as p,R as h,V as S,aG as j}from"./vue.1665582543570.js";import{e as D,u as I,S as M}from"./index.1665582543570.js";const U={class:"h100"},b=k({name:"layoutParentView"}),J=Object.assign(b,{setup(E){const{proxy:r}=L(),a=B(),w=D(),_=I(),{keepAliveNames:o,cachedViews:u}=l(w),{themeConfig:n}=l(_),e=N({refreshRouterViewKey:null,keepAliveNameList:[]}),d=c(()=>n.value.animation),V=c(()=>n.value.isTagsview?u.value:e.keepAliveNameList);return T(()=>{e.keepAliveNameList=o.value,r.mittBus.on("onTagsViewRefreshRouterView",s=>{e.keepAliveNameList=o.value.filter(t=>a.name!==t),e.refreshRouterViewKey=null,m(()=>{e.refreshRouterViewKey=s,e.keepAliveNameList=o.value})})}),A(()=>{m(()=>{setTimeout(()=>{var s;n.value.isCacheTagsView&&(u.value=(s=M.get("tagsViewList"))==null?void 0:s.map(t=>t.name))},0)})}),K(()=>{r.mittBus.off("onTagsViewRefreshRouterView")}),y(()=>a.fullPath,()=>{e.refreshRouterViewKey=decodeURI(a.fullPath)}),(s,t)=>{const R=x("router-view");return i(),C("div",U,[f(R,null,{default:v(({Component:g})=>[f(P,{name:p(d),mode:"out-in"},{default:v(()=>[(i(),h(j,{include:p(V)},[(i(),h(S(g),{key:e.refreshRouterViewKey,class:"w100"}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})])}}});export{J as default};
