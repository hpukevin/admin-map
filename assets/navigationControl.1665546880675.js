import{L as a}from"./leaflet-src.1665546880675.js";import{a as n}from"./index.1665546880675.js";import{l as r,a as l,o as c}from"./vue.1665546880675.js";(function(){L.Control.NavBar=L.Control.extend({options:{position:"topleft",forwardTitle:"\u524D\u8FDB",backTitle:"\u540E\u9000",homeTitle:"\u56DE\u5230\u5730\u56FE\u521D\u59CB\u4F4D\u7F6E"},onAdd:function(t){this.options.center||(this.options.center=t.getCenter()),this.options.zoom||(this.options.zoom=t.getZoom());var o=this.options,e="leaflet-control-navbar",s=L.DomUtil.create("div",e+" leaflet-bar");return this._homeButton=this._createButton(o.homeTitle,e+"-home",s,this._goHome),this._fwdButton=this._createButton(o.forwardTitle,e+"-fwd",s,this._goFwd),this._backButton=this._createButton(o.backTitle,e+"-back",s,this._goBack),this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}],this._curIndx=0,this._updateDisabled(),t.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),t.setView(o.center,o.zoom),s},onRemove:function(t){t.off("moveend",this._updateHistory,this)},_goHome:function(){if(this.options.bbox)try{this._map.fitBounds(this.options.bbox)}catch{this._map.setView(this.options.center,this.options.zoom)}this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(this._curIndx!==0){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx--,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx++,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_createButton:function(t,o,e,s){var i=L.DomUtil.create("a",o,e);return i.href="#",i.title=t,L.DomEvent.on(i,"mousedown dblclick",L.DomEvent.stopPropagation).on(i,"click",L.DomEvent.stop).on(i,"click",s,this).on(i,"click",this._refocusOnMap,this),i},_updateHistory:function(){var t={center:this._map.getCenter(),zoom:this._map.getZoom()},o=this._curIndx+1;this._viewHistory.splice(o,this._viewHistory.length-o,t),this._curIndx++,this._updateDisabled()},_setFwdEnabled:function(t){var o="leaflet-disabled",e="leaflet-control-navbar-fwd-disabled";t===!0?(L.DomUtil.removeClass(this._fwdButton,e),L.DomUtil.removeClass(this._fwdButton,o)):(L.DomUtil.addClass(this._fwdButton,e),L.DomUtil.addClass(this._fwdButton,o))},_setBackEnabled:function(t){var o="leaflet-disabled",e="leaflet-control-navbar-back-disabled";t===!0?(L.DomUtil.removeClass(this._backButton,e),L.DomUtil.removeClass(this._backButton,o)):(L.DomUtil.addClass(this._backButton,e),L.DomUtil.addClass(this._backButton,o))},_updateDisabled:function(){this._curIndx==this._viewHistory.length-1?this._setFwdEnabled(!1):this._setFwdEnabled(!0),this._curIndx<=0?this._setBackEnabled(!1):this._setBackEnabled(!0)}}),L.control.navbar=function(t){return new L.Control.NavBar(t)}})();const d={id:"leaf_map"},h={__name:"navigationControl",setup(t){return r(()=>{var o=a.map("leaf_map",{crs:a.CRS.EPSG3857,center:[23.1317,113.2748],zoom:5,zoomControl:!0,attributionControl:!0});o.attributionControl.setPrefix(""),a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0,attribution:"My Map&copy:2018-2020 contributors"}).addTo(o),a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0}).addTo(o);var s=a.control.navbar();o.addControl(s);var i=a.control.scale({imperial:!1});o.addControl(i)}),(o,e)=>(c(),l("div",d))}};var m=n(h,[["__scopeId","data-v-d640af76"]]);export{m as default};
