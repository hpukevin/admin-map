import{L as a}from"./leaflet-src.1665747927721.js";import{a as m}from"./index.1665747927721.js";import{l as u,a as p,o as f}from"./vue.1665747927721.js";(function(i,t){typeof define=="function"&&define.amd?define(["leaflet"],i):typeof exports=="object"&&(module.exports=i(require("leaflet"))),typeof t!="undefined"&&t.L&&(t.L.Control.MiniMap=i(L),t.L.control.minimap=function(e,n){return new t.L.Control.MiniMap(e,n)})})(function(i){var t=i.Control.extend({includes:i.Evented?i.Evented.prototype:i.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(e,n){i.Util.setOptions(this,n),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=e},onAdd:function(e){this._mainMap=e,this._container=i.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",i.DomEvent.disableClickPropagation(this._container),i.DomEvent.on(this._container,"mousewheel",i.DomEvent.stopPropagation);var n={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:e.options.crs};return n=i.Util.extend(this.options.mapOptions,n),this._miniMap=new i.Map(this._container,n),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(i.Util.bind(function(){this._aimingRect=i.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=i.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(e){i.Control.prototype.addTo.call(this,e);var n=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(n,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(e){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(e){this._miniMap.removeLayer(this._layer),this._layer=e,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(e,n,l,s,h,c){var o=i.DomUtil.create("a",l,s);o.innerHTML=e,o.href="#",o.title=n;var r=i.DomEvent.stopPropagation;return i.DomEvent.on(o,"click",r).on(o,"mousedown",r).on(o,"dblclick",r).on(o,"click",i.DomEvent.preventDefault).on(o,"click",h,c),o},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(e){e!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(e){if(this._miniMapMoving)this._miniMapMoving=!1;else{var n=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(n,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(e){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(e){if(!this.options.centerFixed){var n=this._aimingRect.getBounds(),l=this._miniMap.latLngToContainerPoint(n.getSouthWest()),s=this._miniMap.latLngToContainerPoint(n.getNorthEast());this._lastAimingRectPosition={sw:l,ne:s}}},_onMiniMapMoving:function(e){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new i.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(e){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var e=this.options.zoomLevelFixed;return this._isDefined(e)&&this._isInteger(e)},_decideZoom:function(e){if(this._isZoomLevelFixed())return e?this.options.zoomLevelFixed:this._mainMap.getZoom();if(e)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var n=this._miniMap.getZoom()-this._mainMap.getZoom(),l=this._miniMap.getZoom()-this.options.zoomLevelOffset,s;return n>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(s=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):s=this._mainMap.getZoom():s=l,this._lastMiniMapZoom=this._miniMap.getZoom(),s},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(e){return typeof e=="number"},_isDefined:function(e){return typeof e!="undefined"},_onToggle:function(){i.Util.requestAnimFrame(function(){i.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),i.Browser.any3d||i.Util.requestAnimFrame(this._fireToggleEvents,this)},this)},_fireToggleEvents:function(){i.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var e={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",e),this.fire("toggle",e)}});return i.Map.mergeOptions({miniMapControl:!1}),i.Map.addInitHook(function(){this.options.miniMapControl&&(this.miniMapControl=new t().addTo(this))}),t},window);(function(i){var t;if(typeof define=="function"&&define.amd)define(["leaflet"],i);else if(typeof module!="undefined")t=require("leaflet"),module.exports=i(t);else{if(typeof window.L=="undefined")throw new Error("Leaflet must be loaded first");i(window.L)}})(function(i){i.Control.Fullscreen=i.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=i.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=i.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),i.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){i.DomEvent.stopPropagation(t),i.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),i.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){i.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){i.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?i.DomUtil.addClass(e,"leaflet-fullscreen-on"):i.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e===this.getContainer()&&!this._isFullscreen?(this._setFullscreen(!0),this.fire("fullscreenchange")):e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange"))}}),i.Map.mergeOptions({fullscreenControl:!1}),i.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new i.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var t;if("onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t){var e=i.bind(this._onFullscreenChange,this);this.whenReady(function(){i.DomEvent.on(document,t,e)}),this.on("unload",function(){i.DomEvent.off(document,t,e)})}}),i.control.fullscreen=function(t){return new i.Control.Fullscreen(t)}});const d={id:"leaf_map"},_={__name:"fullscreenControl",setup(i){return u(()=>{var t=a.map("leaf_map",{crs:a.CRS.EPSG3857,center:[23.1317,113.2748],zoom:5,zoomControl:!0,attributionControl:!1});a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0,attribution:"My Map&copy:2018-2020 contributors"}).addTo(t),a.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0}).addTo(t);var e=new a.TileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{minZoom:1,maxZoom:18,noWrap:!0}),n=new a.Control.MiniMap(e,{toggleDisplay:!0});t.addControl(n);var l=a.control.fullscreen();t.addControl(l)}),(t,e)=>(f(),p("div",d))}};var y=m(_,[["__scopeId","data-v-834afe16"]]);export{y as default};
