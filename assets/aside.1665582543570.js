import{K as V,s as v,aD as q,a2 as $,m as F,j as W,l as E,aI as H,a6 as _,o as f,R as B,S as m,a as w,a9 as N,F as D,Z as C,b as k,Y as M,aa as O,u as g,J as P,T as U,U as z,W as J,M as K,k as Y}from"./vue.1665582543570.js";import{u as I,l as Z,c as G,p as Q}from"./index.1665582543570.js";import{b as X,L as ee}from"./main.1665582543570.js";const te=V({name:"navMenuVertical"}),se=Object.assign(te,{props:{menuList:{type:Array,default:()=>[]}},setup(x){const i=x,b=I(),{themeConfig:p}=v(b),h=q(),l=$({defaultActive:h.meta.isDynamic?h.meta.isDynamicPath:h.path,isCollapse:!1}),a=F(()=>i.menuList),A=F(()=>p.value),n=y=>{const{path:u,meta:c}=y,r=c.isDynamic?c.isDynamicPath.split("/"):u.split("/");return r.length>=4&&c.isHide?r.splice(0,3).join("/"):u};return W(p.value,()=>{document.body.clientWidth<=1e3?l.isCollapse=!1:l.isCollapse=p.value.isCollapse},{immediate:!0}),E(()=>{l.defaultActive=n(h)}),H(y=>{l.defaultActive=n(y),document.body.clientWidth<1e3&&(p.value.isCollapse=!1)}),(y,u)=>{const c=_("SvgIcon"),r=_("el-sub-menu"),L=_("el-menu-item"),S=_("el-menu");return f(),B(S,{router:"","default-active":l.defaultActive,"background-color":"transparent",collapse:l.isCollapse,"unique-opened":g(A).isUniqueOpened,"collapse-transition":!1},{default:m(()=>[(f(!0),w(D,null,N(g(a),s=>(f(),w(D,null,[s.children&&s.children.length>0?(f(),B(r,{index:s.path,key:s.path},{title:m(()=>[C(c,{name:s.meta.icon},null,8,["name"]),k("span",null,M(s.meta.title),1)]),default:m(()=>[C(X,{chil:s.children},null,8,["chil"])]),_:2},1032,["index"])):(f(),B(L,{index:s.path,key:s.path},O({default:m(()=>[C(c,{name:s.meta.icon},null,8,["name"])]),_:2},[!s.meta.isLink||s.meta.isLink&&s.meta.isIframe?{name:"title",fn:m(()=>[k("span",null,M(s.meta.title),1)])}:{name:"title",fn:m(()=>[k("a",{href:s.meta.isLink,target:"_blank",rel:"opener",class:"w100"},M(s.meta.title),9,["href"])])}]),1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse","unique-opened"])}}}),ne={class:"h100"},oe=V({name:"layoutAside"}),ue=Object.assign(oe,{setup(x){const{proxy:i}=Y(),b=Z(),p=I(),h=G(),{routesList:l}=v(b),{themeConfig:a}=v(p),{isTagsViewCurrenFull:A}=v(h),n=$({menuList:[],clientWidth:""}),y=F(()=>{const{layout:e,isCollapse:t,menuBar:o}=a.value,d=["#FFFFFF","#FFF","#fff","#ffffff"].includes(o)?"layout-el-aside-br-color":"";if(n.clientWidth<=1e3)if(t){document.body.setAttribute("class","el-popup-parent--hidden");const j=document.querySelector(".layout-container"),R=document.createElement("div");return R.setAttribute("class","layout-aside-mobile-mode"),j.appendChild(R),R.addEventListener("click",u),[d,"layout-aside-mobile","layout-aside-mobile-open"]}else return u(),[d,"layout-aside-mobile","layout-aside-mobile-close"];else return e==="columns"?t?[d,"layout-aside-pc-1"]:[d,"layout-aside-pc-220"]:t?[d,"layout-aside-pc-64"]:[d,"layout-aside-pc-220"]}),u=()=>{var o;const e=document.querySelector(".layout-aside-mobile-mode");e&&((o=e.parentNode)==null||o.removeChild(e)),document.body.clientWidth<1e3&&(a.value.isCollapse=!1),document.body.setAttribute("class","")},c=F(()=>{let{layout:e,isShowLogo:t}=a.value;return t&&e==="defaults"||t&&e==="columns"}),r=()=>{if(a.value.layout==="columns")return!1;n.menuList=L(l.value)},L=e=>e.filter(t=>!t.meta.isHide).map(t=>(t=Object.assign({},t),t.children&&(t.children=L(t.children)),t)),S=e=>{n.clientWidth=e},s=e=>{let{layout:t}=a.value;if(t!=="columns")return!1;e||i.mittBus.emit("restoreDefault"),b.setColumnsMenuHover(e)};return W(a.value,e=>{if(e.isShowLogoChange!==e.isShowLogo){if(!i.$refs.layoutAsideScrollbarRef)return!1;i.$refs.layoutAsideScrollbarRef.update()}}),W(Q.state,e=>{let{layout:t,isClassicSplitMenu:o}=e.themeConfig.themeConfig;if(t==="classic"&&o)return!1;r()},{deep:!0}),P(()=>{S(document.body.clientWidth),r(),i.mittBus.on("setSendColumnsChildren",e=>{n.menuList=e.children}),i.mittBus.on("setSendClassicChildren",e=>{let{layout:t,isClassicSplitMenu:o}=a.value;t==="classic"&&o&&(n.menuList=[],n.menuList=e.children)}),i.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{r()}),i.mittBus.on("layoutMobileResize",e=>{S(e.clientWidth),u()})}),(e,t)=>{const o=_("el-scrollbar"),T=_("el-aside");return U((f(),w("div",ne,[C(T,{class:K(["layout-aside",g(y)])},{default:m(()=>[g(c)?(f(),B(ee,{key:0})):J("",!0),C(o,{class:"flex-auto",ref:"layoutAsideScrollbarRef",onMouseenter:t[0]||(t[0]=d=>s(!0)),onMouseleave:t[1]||(t[1]=d=>s(!1))},{default:m(()=>[C(se,{menuList:n.menuList},null,8,["menuList"])]),_:1},512)]),_:1},8,["class"])],512)),[[z,!g(A)]])}}});export{ue as _};
