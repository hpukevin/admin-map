import{K as N,i as $,s as I,aD as K,aH as W,a2 as Y,j as Z,l as q,H as G,aI as J,a6 as C,o as r,a as h,Z as i,S as g,b as m,F as Q,a9 as X,M as d,u,Y as T,k as ee,n as te,m as se,R as H,W as D}from"./vue.1665747927721.js";import{a as ne,l as oe,u as w,p as le}from"./index.1665747927721.js";import{_ as ae}from"./aside.1665747927721.js";import{_ as F,a as ie}from"./main.1665747927721.js";import"./parent.1665747927721.js";const ue={class:"layout-columns-aside"},re=["onClick","onMouseenter","title"],ce={class:"columns-vertical-title font12"},me=["href"],de={class:"columns-vertical-title font12"},fe=N({name:"layoutColumnsAside"}),_e=Object.assign(fe,{setup(P){const y=$([]),v=$(),{proxy:l}=ee(),f=oe(),S=w(),{routesList:k,isColumnsMenuHover:x,isColumnsNavHover:b}=I(f),{themeConfig:_}=I(S),L=K(),M=W(),t=Y({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),O=e=>{t.liIndex=e,v.value.style.top=`${y.value[e].offsetTop+t.difference}px`},j=(e,s)=>{O(s);let{path:o,redirect:a}=e;a?M.push(a):M.push(o)},V=(e,s)=>{let{path:o}=e;t.liOldPath=o,t.liOldIndex=s,t.liHoverIndex=s,l.mittBus.emit("setSendColumnsChildren",p(o)),f.setColumnsMenuHover(!1),f.setColumnsNavHover(!0)},U=async()=>{await f.setColumnsNavHover(!1),setTimeout(()=>{!x&&!b&&l.mittBus.emit("restoreDefault")},100)},B=e=>{te(()=>{O(e)})},z=()=>{t.columnsAsideList=R(k.value);const e=p(L.path);if(Object.keys(e).length<=0)return!1;B(e.item[0].k),l.mittBus.emit("setSendColumnsChildren",e)},p=e=>{const s=e.split("/");let o={};return t.columnsAsideList.map((a,n)=>{a.path===`/${s[1]}`&&(a.k=n,o.item=[{...a}],o.children=[{...a}],a.children&&(o.children=a.children))}),o},R=e=>e.filter(s=>!s.meta.isHide).map(s=>(s=Object.assign({},s),s.children&&(s.children=R(s.children)),s)),E=e=>{t.routeSplit=e.split("/"),t.routeSplit.shift();const s=`/${t.routeSplit[0]}`,o=t.columnsAsideList.find(a=>a.path===s);if(!o)return!1;setTimeout(()=>{B(o.k)},0)};return Z(le.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,!e.routesList.isColumnsMenuHover&&!e.routesList.isColumnsNavHover)t.liHoverIndex=null,l.mittBus.emit("setSendColumnsChildren",p(L.path));else{if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;l.mittBus.emit("setSendColumnsChildren",p(t.liOldPath))}},{deep:!0}),q(()=>{z(),l.mittBus.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),G(()=>{l.mittBus.off("restoreDefault",()=>{})}),J(e=>{E(e.path),l.mittBus.emit("setSendColumnsChildren",p(e.path))}),(e,s)=>{const o=C("SvgIcon"),a=C("el-scrollbar");return r(),h("div",ue,[i(a,null,{default:g(()=>[m("ul",{onMouseleave:s[0]||(s[0]=n=>U())},[(r(!0),h(Q,null,X(t.columnsAsideList,(n,c)=>(r(),h("li",{key:c,onClick:A=>j(n,c),onMouseenter:A=>V(n,c),ref_for:!0,ref:A=>{A&&(y.value[c]=A)},class:d({"layout-columns-active":t.liIndex===c,"layout-columns-hover":t.liHoverIndex===c}),title:n.meta.title},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(r(),h("div",{key:0,class:d(u(_).columnsAsideLayout)},[i(o,{name:n.meta.icon},null,8,["name"]),m("div",ce,T(n.meta.title&&n.meta.title.length>=4?n.meta.title.substr(0,u(_).columnsAsideLayout==="columns-vertical"?4:3):n.meta.title),1)],2)):(r(),h("div",{key:1,class:d(u(_).columnsAsideLayout)},[m("a",{href:n.meta.isLink,target:"_blank"},[i(o,{name:n.meta.icon},null,8,["name"]),m("div",de,T(n.meta.title&&n.meta.title.length>=4?n.meta.title.substr(0,u(_).columnsAsideLayout==="columns-vertical"?4:3):n.meta.title),1)],8,me)],2))],42,re))),128)),m("div",{ref_key:"columnsAsideActiveRef",ref:v,class:d(u(_).columnsAsideStyle)},null,2)],32)]),_:1})])}}});var pe=ne(_e,[["__scopeId","data-v-412ad23c"]]);const he={class:"layout-columns-warp"},Ce=N({name:"layoutColumns"}),ke=Object.assign(Ce,{setup(P){const y=w(),{themeConfig:v}=I(y),l=se(()=>v.value.isFixedHeader);return(f,S)=>{const k=C("el-scrollbar"),x=C("el-container"),b=C("el-backtop");return r(),H(x,{class:"layout-container"},{default:g(()=>[i(pe),m("div",he,[i(ae),i(x,{class:d(["flex-center layout-backtop",{"layout-backtop":!u(l)}])},{default:g(()=>[u(l)?(r(),H(F,{key:0})):D("",!0),i(k,{class:d({"layout-backtop":u(l)})},{default:g(()=>[u(l)?D("",!0):(r(),H(F,{key:0})),i(ie)]),_:1},8,["class"])]),_:1},8,["class"])]),i(b,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}}});export{ke as default};
