import{L as p}from"./leaflet-src.1665747927721.js";import{a as d}from"./index.1665747927721.js";import{l as v,a as g,o as y}from"./vue.1665747927721.js";(function(){var r="[GEOLET] ",o=window.L;if(!o||!o.map){console.error(r+"Missing Leaflet");return}var a=function(t,e){if(typeof e!="object"||e===null)return t;(typeof t!="object"||t===null)&&(t={});for(const i in e)console.log(i),i&&{}.hasOwnProperty.call(e,i)&&(typeof e[i]=="object"&&e[i]!==null&&Object.getPrototypeOf(e[i])==Object.getPrototypeOf({})?t[i]=a(t[i],e[i]):t[i]=e[i]);return t},c=function(t){return o.marker(null,{icon:o.divIcon({html:'<svg width="20" height="20" viewport="0 0 20 20"><circle cx="10" cy="10" r="10" style="fill:white"/><circle cx="10" cy="10" r="7" style="fill:none;stroke:currentColor;stroke-width:2px"/><circle cx="10" cy="10" r="4" style="fill:currentColor"/></svg>',iconAnchor:[10,10],className:""}),attribution:'<a href="https://github.com/rhlt/leaflet-geolet" target="_blank">Geolet</a>',zIndexOffset:1e3})};o.Geolet=o.Control.extend({options:{title:"Find current location",className:null,activeClassName:null,style:{display:"flex",color:""},activeStyle:{display:"flex",color:"#E00"},html:'<svg width="16" height="16" viewport="0 0 16 16" style="margin:auto auto"><circle cx="8" cy="8" r="7" style="fill:none;stroke:currentColor;stroke-width:2px"/><circle cx="8" cy="8" r="4" style="fill:currentColor"/></svg>',geoOptions:{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3},marker:null,popup:null,popupContent:null,updatePopupWhenOpen:!0,autoPan:!0,minZoom:9},_a:null,_map:null,_watchId:null,_latLng:null,_popupContent:null,_first:!1,marker:null,popup:null,initialize:function(t){typeof t=="object"&&t!==null&&o.setOptions(this,t)},isActive:function(){return!!this._watchId},getLatLng:function(){return this.isActive()?this._latLng:null},updatePopup:function(){var t;!this._popup||(typeof this.options.popupContent=="undefined"||this.options.popupContent===null?t="<b>"+o.Geolet.formatLatLng(this.getLatLng())+"</b>":typeof this.options.popupContent=="function"?t=this.options.popupContent.call(this,this.getLatLng()):this.options.popupContent&&(t=this.options.popupContent),t!==null&&this._popup.setContent(t))},activate:function(){if(!!o.Geolet.browserSupport){this.styleAnchor(!0);var t=this,e=function(n){var s=!!t._first;t._latLng=o.latLng(n.coords.latitude,n.coords.longitude,n.coords.altitude),t._popupContent=t.options.popupContent,t._popup&&t._popup.isOpen()&&t.options.updatePopupWhenOpen&&t.updatePopup(),t._marker&&(t._marker.setLatLng(t._latLng),t._marker.addTo(t._map)),t._first&&(t._first=!1,t.options.autoPan&&t._map.setView(t._latLng,t.options.minZoom?Math.max(t._map.getZoom(),t.options.minZoom):t._map.getZoom())),t._map.fire("geolet_success",{control:t,first:s,marker:t._marker,latlng:t._latLng,raw:n})},i=function(n){t.deactivate(),console.warn(r+n.message),t._map.fire("geolet_error",{control:t,raw:n})};this._first=!0,this._watchId=navigator.geolocation.watchPosition(e,i,this.options.geoOptions)}},deactivate:function(){this.styleAnchor(!1),this.isActive()&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=null),this._latLng=null,this._marker&&this._marker.remove(),this._popup&&this._popup.remove()},styleAnchor:function(t){var e=[];!this._a||(this.options.className&&e.push(this.options.className),t&&this.options.activeClassName&&e.push(this.options.activeClassName),e.length?this._a.className=e.join(" "):this._a.className="",t&&this.options.activeStyle&&a(this._a.style,this.options.activeStyle),!t&&this.options.style&&a(this._a.style,this.options.style))},onAdd:function(t){var e=this,i=o.DomUtil.create("div");return this._map=t,o.Geolet.browserSupport?(this._marker&&this._marker.remove(),typeof this.options.marker=="function"?this._marker=this.options.marker.call(this,t):this.options.marker?this._marker=this.options.marker:typeof this.options.marker=="undefined"||this.options.marker===null?this._marker=c():this._marker=null,this._popup&&this._popup.remove(),typeof this.options.popup=="function"?this._popup=this.options.popup.call(this,t):this.options.popup?this._popup=this.options.popup:typeof this.options.popup=="undefined"||this.options.popup===null?this._popup=o.popup({autoPan:this.options.autoPan}):this._popup=null,this._marker&&this._popup&&(this._marker.bindPopup(this._popup),this._marker.on("popupopen",function(){e.updatePopup()})),i.className="leaflet-bar leaflet-control",this._a=document.createElement("a"),this._a.setAttribute("href","#"),this.options.title&&this._a.setAttribute("title",this.options.title),this.styleAnchor(),this._a.addEventListener("click",function(n){e.isActive()?e.deactivate():e.activate(),n.preventDefault(),n.stopPropagation()}),this._a.addEventListener("dblclick",function(n){n.stopPropagation()}),this.options.html&&(this._a.innerHTML=this.options.html),i.appendChild(this._a),i):(console.warn(r+"Browser does not support Geolocation"),i.style.display="none",i)},onRemove:function(t){this.deactivate(),this._a=null,this._map=null,this._popup=null,this._marker=null}}),o.Geolet.browserSupport=!!(navigator&&navigator.geolocation&&navigator.geolocation.watchPosition),o.Geolet.formatSymbols={},o.Geolet.formatLatLng=function(t,e,i){if(t=o.latLng(t,e,i),!!t){var n=[],s=a({deg:"&deg;",min:"&#8217;",sec:"&#8221;",N:"N",E:"E",S:"S",W:"W",space:" ",comma:", "},o.Geolet.formatSymbols);return["lat","lng"].forEach(function(l){var h=l=="lat"?t[l]<0?s.S:s.N:t[l]<0?s.W:s.E,u=Math.round(Math.abs(t[l])*3600)/3600,f=Math.floor(u)+s.deg,m=Math.floor(u*60)%60+s.min,_=Math.floor(u*3600)%60+s.sec;n.push([f,m,_,h].join(s.space))}),n.join(s.comma)}},o.geolet=function(t){return new o.Geolet(t)}})();const k={id:"leaf_map"},w={__name:"leafletformobile",setup(r){return v(()=>{var o=p.map("leaf_map").setView([23.1317,113.2748],18);p.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0}).addTo(o),p.tileLayer("http://t0.tianditu.gov.cn/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=f6d75f77a5cb66b0fcfaec5cbe58a907",{noWrap:!0}).addTo(o),p.geolet({position:"bottomleft"}).addTo(o)}),(o,a)=>(y(),g("div",k))}};var b=d(w,[["__scopeId","data-v-9a850138"]]);export{b as default};
